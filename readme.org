* Design notes
- Start from simple HTML rendering of an org document -- resist urge to use fancy frameworks.  Re-style at the CSS, JS levels
- Keep site usage compatible with EWW
- ToC should be followable, scrollable in every page to show context
  - hiding content should be reflected in the ToC -- can serve as a 'viewed' indicator
- Footnotes should be displayed with content to prevent user 'jumping' around the page
  - can serve as a set of annotations or callouts
  - separate feature for callouts?  things like links to excerpts to enable tldr
- navigation
  - should be easy as possible
  - collapsing and narrowing ('presentation mode')
- reproducibility / transparency
  - anytime code is used to produce something, a link to the python build (toml, lock etc) should be included

* TODO Pre-publication checklist
:LOGBOOK:
- State "TODO"       from              [2025-11-06 Thu 14:45:45]
:END:
- [-] pre publication checklist
  - [X] modeline to contain links for (to be inserted in post0)
    - [X] reddit / youtube / twitter / hn / mastodon / linkedin
    - [X] link to github code
    - [X] link to github change history for this article
    - [X] icons should render only if a link is availble
  - [X] add modeline to mobile

  - [X] add home button to navbar (next to search) (eventually will add iframe for clicking link in index from anywhere)
  - [X] remove tldr title from toc
  - [X] pull routes out of about
  - [X] make title work (eg whatever is displayed in post.org) (simply add title back in, that's sufficient for now)
    
  - [X] remove junk from minimap

  - [X] remove junk from bibliography

  - [X] rebind click events on links in article -- if relative link (eg an href to a page in this blog) then do the same thing we doo in navbar (need to use goto, not the default event)

  - [X] sample articles
    - [X] fix homepage -- page1 links to post0
    - [X] .org for index.html, should be another article

  - [X] fix minimap click to scroll to account for padding / margin

  - [X] double check mobile experience and add necessary compoonents

  - [X] final styling
    - [X] font size
    - [X] padding
    - [X] all hover styles
    - [X] softer styling for icons

  - [ ] polish the sample articles (this will be the first post basically)

  - [ ] styling
    - padding in the article


** TODOs
- [ ] automated blog post illustration.... make it adhere to style -- use as bannerr (extremely wide aspect ratio), black and white, low polygon
- [ ] setup up todo configuration in this file to allow for capturing todo data (don't worry about anything more intense than that for now) -- can link commits to the item when marking it as done
- [ ] refacotring -- why do tthe effect need to be arranged in the way it is (effect -> onmount, with page contentt mutated outside of the onmouont) will likely need gpt for this
  - [ ] full jquery migration (still need to do tags, bib)
  - [ ] use same pattern of container html everywhere
  - [ ] rebuild as much of the extracted component to give Svelte more control over the DOM (eg getting the CSS to actually work)
    - migrate css from global to component level
  - [ ] figure out hwo to remove onmount, it has something to do with the observers
  - [ ] better understanding of layout and make changes if it makes sense in my app
- [ ] image optimizatiion?  delay thiis?
- [ ] automoatically build article list from index page or bettter yet autogenerate the index page from data (even if this uses data generated in a build step)
- [ ] clean undefined in index page
- [ ] plotly via json not html
- [ ] sqlite containing html for use via wasm
- [ ] different styling for links
  - external
  - internal
  - 'pointer to another location in this document'

** TODO: sticky headers in ToC and Footnotes
** TODO: overflow x for code in html page
** TODO: lack of 'routing' in svelte static site (to provide history)
** TODO: svelte?
** TODO: scrub progress bar to fast scroll
** TODO: click propogate for folding -- couple issues, first, make it clear what heading you're folding
** TODO: animate folding -- why isn't it working?
** TODO: add copy button to code blocks
** TODO: add percent page and percent words til end of page
** TODO: add breadcrumb to the top of the page
** TODO: import html where relevant (eg for the minimap and progress bars)
** TODO: decouple components (low priority, get everything working first as this is simply a  static site, not a frameowrkkj,w)
** TODO: hide-show all but one heading (narrow)
** TODO: multiple summarization level box in TLDR
** TODO: make it mobile first
** TODO: hideshow hud
** TODO: rebuild minimap on window resize, text scale change, hide-show headers
** TODO: add 'annotations' feature -- eg what I'm currently abusing footnotes for -- this would go by the tldr
** TODO: current implementation of link following doesn't allow for navigating by browser history
** TODO: factor each into script
** TODO: add function to collapse all leafs, probably any outline container without a child outline container
** TODO: add keys for commands
** TODO: footnotes in margin -- sticky footnotes as a simple implementation?
** TODO: function to 'spotlight' or narrow current heading (this can be used as a basis for a presentation mode)
** TODO: function to hide/show table of contents.  bind this to a key (add button?)
** TODO: add subtle progress bar (toc provides progress, but only at the heading level)
** TODO: echo keystrokes for user feedback
// TODO overflow rule for css charts on mobile, stack all horizontally */
** TODO: Add indentation for first 3 levels (subtle) */
// TODO refactor CSS to use variables for things like color and size */
// TODO add underlines to the headings?  Some kind of visual distinction between and header and a paragraph, extra points if the styling makes the headins look more clickable */
// TODO (html level) add nav bar to all returning to the index). include as html?
// TODO once the above is done, use an html include to add the global css/js */
// TODO Highlighting certain phrases for the purposes of annotation
// TODO add iconography (all the icons?) looking for smooth icons like the svg icons in all-the-icons
// TODO generate interactive graph representation of site (include in the index)
// TODO Automatic semantic highlighting -- color identifiers?


* TODO Preview link on hover https://jsfiddle.net/yboss/q29tP/
* DONE enable python venvs https://emacs.stackexchange.com/questions/24267/using-org-babel-to-enable-virtualenv
:LOGBOOK:
- State "DONE"       from              [2025-10-08 Wed 19:10:53]
:END:
* DONE finish basic narrative features (enumerated in post0.org)
:LOGBOOK:
- State "DONE"       from              [2025-10-08 Wed 19:10:54]
:END:
* DONE follow along Table of Contents: https://www.bram.us/2020/01/10/smooth-scrolling-sticky-scrollspy-navigation/
:LOGBOOK:
- State "DONE"       from "STARTED"    [2025-10-09 Thu 09:20:43]
- State "STARTED"    from "TODO"       [2025-10-08 Wed 19:11:39]
- State "TODO"       from "DONE"       [2025-10-08 Wed 19:11:05]
- State "DONE"       from              [2025-10-08 Wed 19:11:02]
:END:
:LOGBOOK:
- State "TODO"       from              [2025-10-09 Thu 09:20:50]
:END:
*  sv

Everything you need to build a Svelte project, powered by [`sv`](https://github.com/sveltejs/cli).

## Creating a project

If you're seeing this, you've probably already done this step. Congrats!

```sh
# create a new project in the current directory
npx sv create

# create a new project in my-app
npx sv create my-app
```

## Developing

Once you've created a project and installed dependencies with `npm install` (or `pnpm install` or `yarn`), start a development server:

```sh
npm run dev

# or start the server and open the app in a new browser tab
npm run dev -- --open
```

## Building

To create a production version of your app:

```sh
npm run build
```

You can preview the production build with `npm run preview`.

> To deploy your app, you may need to install an [adapter](https://svelte.dev/docs/kit/adapters) for your target environment.
