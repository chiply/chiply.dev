- [X] mobile
- [X] new url
- [X] deploy to url (new use chiply.dev)
  - no need for GHA as there is direct GH integration -- set up through vercel.  pushes to `preview` trigger preview deployments (to `chiply-dev.dev`) and pushes to `main` (should occur via a pull request, or can just merge locally) trigger production deployments (to `chiply.dev`) -- note the dev URL needs to be authenticated, the PRD one is live and dooesn't need to be authed
    - [X] (CANCELLED) gha for deploying to vercel (for prd deployments)
- [ ] get env set up for svelte stuff (lsp + webmode etc...)
  - navigation
  - find refs
  - autocompletion for JS stuff
  - autocompletion for tags
  - emmet?
- [ ] setup up todo configuration in this file to allow for capturing todo data (don't worry about anything more intense than that for now) -- can link commits to the item when marking it as done

- [ ] add jquery
  
- [ ] refactor
  - isWide over isMobile and make this state
  - remove unnecessary onMount lifecyle hooks.  understand exactly what is happening when they're used together
  - rebuild as much of the extracted component to give Svelte more control over the DOM (eg getting the CSS to actually work)
    - migrate css from global to component level
  - better understanding of layout and make changes if it makes sense in my app

    
- [ ] images

* Design notes
- Start from simple HTML rendering of an org document -- resist urge to use fancy frameworks.  Re-style at the CSS, JS levels
- Keep site usage compatible with EWW
- ToC should be followable, scrollable in every page to show context
  - hiding content should be reflected in the ToC -- can serve as a 'viewed' indicator
- Footnotes should be displayed with content to prevent user 'jumping' around the page
  - can serve as a set of annotations or callouts
  - separate feature for callouts?  things like links to excerpts to enable tldr
- navigation
  - should be easy as possible
  - collapsing and narrowing ('presentation mode')
- reproducibility / transparency
  - anytime code is used to produce something, a link to the python build (toml, lock etc) should be included

* TODO
JS
// TODO: sticky headers in ToC and Footnotes
// TODO: overflow x for code in html page
// TODO: lack of 'routing' in svelte static site (to provide history)
// TODO: svelte?
// TODO: scrub progress bar to fast scroll
// TODO: click propogate for folding -- couple issues, first, make it clear what heading you're folding
// TODO: animate folding -- why isn't it working?
// TODO: add copy button to code blocks
// TODO: high memory usage (1.5GB)
// TODO: add percent page and percent words til end of page
// TODO: add breadcrumb to the top of the page
// TODO: import html where relevant (eg for the minimap and progress bars)
// TODO: decouple components (low priority, get everything working first as this is simply a  static site, not a frameowrkkj,w)
// TODO: hide-show all but one heading (narrow)
// TODO: multiple summarization level box in TLDR
// TODO: make it mobile first
// TODO: hideshow hud
// TODO: rebuild minimap on window resize, text scale change, hide-show headers
// TODO: add 'annotations' feature -- eg what I'm currently abusing footnotes for -- this would go by the tldr
// TODO: current implementation of link following doesn't allow for navigating by browser history
// TODO: factor each into script
// TODO: add function to collapse all leafs, probably any outline container without a child outline container
// TODO: add keys for commands
// TODO: footnotes in margin -- sticky footnotes as a simple implementation?
// TODO: function to 'spotlight' or narrow current heading (this can be used as a basis for a presentation mode)
// TODO: function to hide/show table of contents.  bind this to a key (add button?)
// TODO: add subtle progress bar (toc provides progress, but only at the heading level)
// TODO: echo keystrokes for user feedback

CSS
/* overflow rule for css charts on mobile, stack all horizontally */
/* TODO: Add indentation for first 3 levels (subtle) */
/* TODO refactor CSS to use variables for things like color and size */
/* TODO add underlines to the headings?  Some kind of visual distinction between and header and a paragraph, extra points if the styling makes the headins look more clickable */

HTML
/* TODO (html level) add nav bar to all returning to the index). include as html? */
/* TODO once the above is done, use an html include to add the global css/js */
// TODO Highlighting certain phrases for the purposes of annotation
// TODO add iconography (all the icons?) looking for smooth icons like the svg icons in all-the-icons

General
// add tldr div which inludes a claude summary of the code
// prevent jitter on load, can we defer loading html until after the JS is run?
// WF for quicly snapping and arranging screenshots
// TODO multifolder structure for HTML?  hold off until I've got things figure out
// TODO generate interactive graph representation of site (include in the index)
// TODO Automatic semantic highlighting -- color identifiers?


* TODO Preview link on hover https://jsfiddle.net/yboss/q29tP/
* DONE enable python venvs https://emacs.stackexchange.com/questions/24267/using-org-babel-to-enable-virtualenv
:LOGBOOK:
- State "DONE"       from              [2025-10-08 Wed 19:10:53]
:END:
* DONE finish basic narrative features (enumerated in post0.org)
:LOGBOOK:
- State "DONE"       from              [2025-10-08 Wed 19:10:54]
:END:
* DONE follow along Table of Contents: https://www.bram.us/2020/01/10/smooth-scrolling-sticky-scrollspy-navigation/
:LOGBOOK:
- State "DONE"       from "STARTED"    [2025-10-09 Thu 09:20:43]
- State "STARTED"    from "TODO"       [2025-10-08 Wed 19:11:39]
- State "TODO"       from "DONE"       [2025-10-08 Wed 19:11:05]
- State "DONE"       from              [2025-10-08 Wed 19:11:02]
:END:
:LOGBOOK:
- State "TODO"       from              [2025-10-09 Thu 09:20:50]
:END:
* Deployment
Particularly challenging becuase of how my app creates webpages (from html files) and how svelte treats assets.

Basically, the assets won't get included unless you have configured themn to be included, and unless they are explicitly imported by name (eg no dynamic imports).

So for now, I'm importing the articles explicitly, which might not be scalable, should TODO look into how to explicitly include assets in the build without importing them by name.

There are still some asset availability issues, but they should be easier to solve. 

Useful aspect of this is I now better understand the general concept of how browser's load existing files like HTML files. 

LEFTOFF --  make a plan from this:

DONE TEST with iframes

DONE gif 

DONE stuff as much into the src/assets as possible and document exactly what goes where and how each content type can be referenced in my setup -- basically anythinig referenced directly as content inside the 

DONE Figure out how to host at a personal domain.

DONE Then should get other components in (foldable divs, progress bar...)
DONE progress bar
DONE foldable divs

DONE Then make this mobile friendly

DONE (ish) Font size thing (66 chars wide)

Build an index page and figure out routing issue

After refactoring at that point I should publish my first article, which should be a demo page showing everything you can do with this setup.

*  sv

Everything you need to build a Svelte project, powered by [`sv`](https://github.com/sveltejs/cli).

## Creating a project

If you're seeing this, you've probably already done this step. Congrats!

```sh
# create a new project in the current directory
npx sv create

# create a new project in my-app
npx sv create my-app
```

## Developing

Once you've created a project and installed dependencies with `npm install` (or `pnpm install` or `yarn`), start a development server:

```sh
npm run dev

# or start the server and open the app in a new browser tab
npm run dev -- --open
```

## Building

To create a production version of your app:

```sh
npm run build
```

You can preview the production build with `npm run preview`.

> To deploy your app, you may need to install an [adapter](https://svelte.dev/docs/kit/adapters) for your target environment.
